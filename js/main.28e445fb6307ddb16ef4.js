!function(t){function e(e){for(var n,r,a=e[0],l=e[1],c=e[2],_=0,u=[];_<a.length;_++)r=a[_],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&u.push(o[r][0]),o[r]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);for(h&&h(e);u.length;)u.shift()();return s.push.apply(s,c||[]),i()}function i(){for(var t,e=0;e<s.length;e++){for(var i=s[e],n=!0,a=1;a<i.length;a++){var l=i[a];0!==o[l]&&(n=!1)}n&&(s.splice(e--,1),t=r(r.s=i[0]))}return t}var n={},o={0:0},s=[];function r(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=n,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(i,n,function(e){return t[e]}.bind(null,n));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var a=window.webpackJsonp=window.webpackJsonp||[],l=a.push.bind(a);a.push=e,a=a.slice();for(var c=0;c<a.length;c++)e(a[c]);var h=l;s.push([7,1]),i()}([,,,,,,,function(t,e,i){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),i(8);var o=i(9),s=i(13),r=n(i(5)),a=i(14);document.addEventListener("DOMContentLoaded",(function(){o.library.add(s.faBars,s.faTimesCircle),o.dom.watch();var t=new a.ParticleEngine("renderCanvas");if(t.supportsWebGL2WithCompute())t.createScene()&&t.startRender();else{r.default(document.body).html('\n      <div id="noWebGL2WithCompute">\n        Your browser does not support WebGL 2.0 Compute Shader<br>\n        You need a browser like Chrome Canary or Edge Canary<br>\n        <br>\n        <br>\n        To setup this browser you need some flags:\n        <ul>\n          <li>\n            <p><code>--enable-webgl2-compute-context</code><br>\n            Enable WebGL Compute shader, WebGL2ComputeRenderingContext<br>\n            Or you can enable this flag via about://flags/ if using the corresponding version, choose "WebGL 2.0 Compute"</p>\n          </li>\n          <li>\n            <p><code>--use-angle=gl</code><br>\n            Run ANGLE with OpenGL backend because Shader Storage Buffer Object is now on implementing and there are some use cases which do not work well on D3D backend yet<br>\n            Some demos in this page need this flag<br>\n            Or you can enable this flag via about://flags/, choose "Choose ANGLE graphics backend"</p>\n          </li>\n          <li>\n            <p><code>--use-cmd-decoder=passthrough</code><br>\n            In some environments, it could run well only after adding this flag. So try this if could not work with above two flags</p>\n          </li>\n          <li>\n            <p><code>--use-gl=angle</code><br>\n            Run OpenGL with ANGLE. On Linux, you must specify this explicitly. On Windows, this flag is not needed because ANGLE will be used by default</p>\n          </li>\n        </ul>\n\n        <br>\n        Additional information:<br>\n        <ul>\n          <li><a href="https://www.khronos.org/registry/webgl/specs/latest/2.0-compute/" target="_blank">WebGL 2.0 Compute Specification</a></li>\n          <li><a href="https://groups.google.com/a/chromium.org/d/topic/blink-dev/bPD47wqY-r8/discussion" target="_blank">Google Groups discussion</a></li>\n          <li><a href="https://github.com/9ballsyndrome/WebGL_Compute_shader" target="_blank">WebGL 2.0 Compute shader Demos</a></li>\n        </ul>\n      </div>\n    ')}}))},function(t,e,i){},,,,,,function(t,e,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,i,n){void 0===n&&(n=i),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)"default"!==i&&Object.hasOwnProperty.call(t,i)&&n(e,t,i);return o(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.ParticleEngine=void 0;var r=s(i(0));window.THREE=r;var a=i(15),l=i(16),c=i(17),h=i(21),_=i(23),u=function(){function t(t){this._boundingBoxDimension=new r.Vector3(8,5,5),this._elapsed=0,this._canvas=document.getElementById(t);this._gl=this._canvas.getContext("webgl2-compute",{antialias:!0,alpha:!1,depth:!0,premultipliedAlpha:!0,stencil:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",desynchronized:!1})}return t.prototype.supportsWebGL2WithCompute=function(){return!!this._gl},t.prototype.createScene=function(){this._settingsGui=new h.SettingsGui;var t=this._canvas.clientWidth,e=this._canvas.clientHeight;return console.log("three.js revision: "+r.REVISION),this._scene=new r.Scene,this._camera=new r.PerspectiveCamera(45,t/e,.1,100),this._renderer=new r.WebGLRenderer({canvas:this._canvas,context:this._gl}),this._renderer.setPixelRatio(window.devicePixelRatio),this._renderer.setClearColor(0,0),this._renderer.setSize(t,e,!1),this._boundingBox=new a.BoundingBox(this._boundingBoxDimension,this._scene,t,e),this._crossHair=new l.CrossHair(new r.Vector3(1,1,1),this._boundingBoxDimension,this._scene,this._settingsGui.getSettings(),t,e),this._camera.position.z=10,this._controls=new _.TrackballControls(this._camera,this._canvas),this._controls.rotateSpeed=2.5,this._controls.zoomSpeed=2.5,this._controls.panSpeed=.8,this._controls.noZoom=!1,this._controls.noPan=!0,this._controls.staticMoving=!0,this._controls.dynamicDampingFactor=.3,this._controls.keys=[65,83,68],this._particleRender=new c.ParticleRenderer(this._gl,this._camera,this._settingsGui.getSettings(),this._boundingBoxDimension),this._particleRender.init()},t.prototype.startRender=function(){var t=this;window.addEventListener("resize",(function(){var e=t._canvas.clientWidth,i=t._canvas.clientHeight;t.resize(e,i)})),this.animate(0)},t.prototype.resize=function(t,e){this._camera.aspect=t/e,this._camera.updateProjectionMatrix(),this._renderer.setSize(t,e,!1),this._boundingBox.resize(t,e),this._crossHair.resize(t,e)},t.prototype.animate=function(t){var e=this;window.requestAnimationFrame((function(t){e.animate(t)}));var i=window.performance.now(),n=i-this._elapsed;this._elapsed=i,this._controls.update(),this._crossHair.update(),this._settingsGui.updateFrames(n),this._renderer.render(this._scene,this._camera),this._particleRender.update(t/1e3),this._renderer.state.reset()},t}();e.ParticleEngine=u},function(t,e,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,i,n){void 0===n&&(n=i),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)"default"!==i&&Object.hasOwnProperty.call(t,i)&&n(e,t,i);return o(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.BoundingBox=void 0;var r=s(i(0)),a=i(6),l=i(3),c=i(2),h=function(){function t(t,e,i,n){var o=t.x/2,s=t.y/2,h=t.z/2,_=new r.Vector3(o,-s,h),u=new r.Vector3(o,s,h),d=new r.Vector3(-o,s,h),g=new r.Vector3(-o,-s,h),f=new r.Vector3(-o,-s,-h),p=new r.Vector3(-o,s,-h),v=new r.Vector3(o,s,-h),m=new r.Vector3(o,-s,-h);this._lineMaterial=new c.LineMaterial({color:16777215,linewidth:3});var y=new l.LineGeometry,x=[_.x,_.y,_.z,u.x,u.y,u.z,u.x,u.y,u.z,d.x,d.y,d.z,d.x,d.y,d.z,g.x,g.y,g.z,g.x,g.y,g.z,_.x,_.y,_.z,g.x,g.y,g.z,d.x,d.y,d.z,d.x,d.y,d.z,p.x,p.y,p.z,p.x,p.y,p.z,f.x,f.y,f.z,f.x,f.y,f.z,g.x,g.y,g.z,_.x,_.y,_.z,m.x,m.y,m.z,m.x,m.y,m.z,v.x,v.y,v.z,v.x,v.y,v.z,u.x,u.y,u.z,u.x,u.y,u.z,_.x,_.y,_.z,m.x,m.y,m.z,f.x,f.y,f.z,f.x,f.y,f.z,p.x,p.y,p.z,p.x,p.y,p.z,v.x,v.y,v.z,v.x,v.y,v.z,m.x,m.y,m.z];y.setPositions(x);var P=new a.Line2(y,this._lineMaterial);P.computeLineDistances(),e.add(P),this.resize(i,n)}return t.prototype.resize=function(t,e){this._lineMaterial.resolution.set(t,e)},t}();e.BoundingBox=h},function(t,e,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,i,n){void 0===n&&(n=i),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)"default"!==i&&Object.hasOwnProperty.call(t,i)&&n(e,t,i);return o(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.CrossHair=void 0;var r=s(i(0)),a=i(6),l=i(3),c=i(2),h=function(){function t(t,e,i,n,o,s){var h=this;this._leftPressed=!1,this._rightPressed=!1,this._forwardPressed=!1,this._backPressed=!1,this._upPressed=!1,this._downPressed=!1,this._movementSpeed=.1,this._settingsObject=n,this._halfBounding=e.clone().multiplyScalar(.5),this._negativeHalfBounding=this._halfBounding.clone().multiplyScalar(-1),this._crossHair=new r.Object3D,i.add(this._crossHair),this._xAxisMat=new c.LineMaterial({color:16711680,linewidth:2}),this._yAxisMat=new c.LineMaterial({color:65280,linewidth:2}),this._zAxisMat=new c.LineMaterial({color:255,linewidth:2}),this.resize(o,s);var _=new l.LineGeometry;_.setPositions([-t.x/2,0,0,t.x/2,0,0]);var u=new l.LineGeometry;u.setPositions([0,-t.y/2,0,0,t.y/2,0]);var d=new l.LineGeometry;d.setPositions([0,0,-t.z/2,0,0,t.z/2]),this._crossHair.add(new a.Line2(_,this._xAxisMat)),this._crossHair.add(new a.Line2(u,this._yAxisMat)),this._crossHair.add(new a.Line2(d,this._zAxisMat)),document.addEventListener("keydown",(function(t){" "===t.key&&(h._settingsObject.forceActive=!0,h._xAxisMat.linewidth=h._yAxisMat.linewidth=h._zAxisMat.linewidth=5),"a"===t.key&&(h._leftPressed=!0),"s"===t.key&&(h._backPressed=!0),"d"===t.key&&(h._rightPressed=!0),"w"===t.key&&(h._forwardPressed=!0),"PageUp"===t.key&&(h._upPressed=!0),"PageDown"===t.key&&(h._downPressed=!0)})),document.addEventListener("keyup",(function(t){" "===t.key&&(h._settingsObject.forceActive=!1,h._xAxisMat.linewidth=h._yAxisMat.linewidth=h._zAxisMat.linewidth=2),"a"===t.key&&(h._leftPressed=!1),"s"===t.key&&(h._backPressed=!1),"d"===t.key&&(h._rightPressed=!1),"w"===t.key&&(h._forwardPressed=!1),"PageUp"===t.key&&(h._upPressed=!1),"PageDown"===t.key&&(h._downPressed=!1)}))}return t.prototype.update=function(){var t=this._settingsObject.forcePosition.clone();this._leftPressed&&(t.x-=this._movementSpeed),this._rightPressed&&(t.x+=this._movementSpeed),this._forwardPressed&&(t.z-=this._movementSpeed),this._backPressed&&(t.z+=this._movementSpeed),this._upPressed&&(t.y+=this._movementSpeed),this._downPressed&&(t.y-=this._movementSpeed);t.x>=this._negativeHalfBounding.x-.001&&t.x<=this._halfBounding.x+.001&&t.y>=this._negativeHalfBounding.y-.001&&t.y<=this._halfBounding.y+.001&&t.z>=this._negativeHalfBounding.z-.001&&t.z<=this._halfBounding.z+.001&&(this._crossHair.position.copy(t),this._settingsObject.forcePosition.copy(t))},t.prototype.resize=function(t,e){this._xAxisMat.resolution.set(t,e),this._yAxisMat.resolution.set(t,e),this._zAxisMat.resolution.set(t,e)},t}();e.CrossHair=h},function(t,e,i){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.ParticleRenderer=void 0;var o=n(i(18)),s=n(i(19)),r=n(i(20)),a=function(){function t(t,e,i,n){this._particleCount=0,this._lastTime=0,this._gl=t,this._threeCamera=e,this._settingsObject=i,this._boundingBox=n}return t.prototype.init=function(){this._logComputeThings();var t=this._gl.createShader(this._gl.COMPUTE_SHADER);if(this._gl.shaderSource(t,o.default),this._gl.compileShader(t),!this._gl.getShaderParameter(t,this._gl.COMPILE_STATUS))return console.error(this._gl.getShaderInfoLog(t)),!1;if(this._computeProgram=this._gl.createProgram(),this._gl.attachShader(this._computeProgram,t),this._gl.linkProgram(this._computeProgram),!this._gl.getProgramParameter(this._computeProgram,this._gl.LINK_STATUS))return console.error(this._gl.getProgramInfoLog(this._computeProgram)),!1;this._initLoc=this._gl.getUniformLocation(this._computeProgram,"uiInit"),this._particleCountLoc=this._gl.getUniformLocation(this._computeProgram,"uiParticleCount"),this._boundingBoxLoc=this._gl.getUniformLocation(this._computeProgram,"v3BoundingBox"),this._deltaTimeLoc=this._gl.getUniformLocation(this._computeProgram,"fDeltaTime"),this._gravityLoc=this._gl.getUniformLocation(this._computeProgram,"fGravity"),this._forceOnLoc=this._gl.getUniformLocation(this._computeProgram,"uiForce"),this._forcePositionsloc=this._gl.getUniformLocation(this._computeProgram,"v3ForcePostion"),this._forceLoc=this._gl.getUniformLocation(this._computeProgram,"fForce"),this._vao=this._gl.createVertexArray(),this._posBuffer=this._gl.createBuffer(),this._velBuffer=this._gl.createBuffer();var e=this._gl.createShader(this._gl.VERTEX_SHADER);if(this._gl.shaderSource(e,r.default),this._gl.compileShader(e),!this._gl.getShaderParameter(e,this._gl.COMPILE_STATUS))return console.log(this._gl.getShaderInfoLog(e)),!1;var i=this._gl.createShader(this._gl.FRAGMENT_SHADER);return this._gl.shaderSource(i,s.default),this._gl.compileShader(i),this._gl.getShaderParameter(i,this._gl.COMPILE_STATUS)?(this._shadingProgram=this._gl.createProgram(),this._gl.attachShader(this._shadingProgram,e),this._gl.attachShader(this._shadingProgram,i),this._gl.linkProgram(this._shadingProgram),this._gl.getProgramParameter(this._shadingProgram,this._gl.LINK_STATUS)?(this._gl.bindVertexArray(this._vao),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._posBuffer),this._gl.enableVertexAttribArray(0),this._gl.vertexAttribPointer(0,4,this._gl.FLOAT,!1,0,0),this._projectionMatrixLoc=this._gl.getUniformLocation(this._shadingProgram,"u_projectionMatrix"),this._viewMatrixLoc=this._gl.getUniformLocation(this._shadingProgram,"u_viewMatrix"),this._colorLoc=this._gl.getUniformLocation(this._shadingProgram,"u_color"),this._pointSizeLoc=this._gl.getUniformLocation(this._shadingProgram,"u_pointSize"),this._gl.bindVertexArray(null),this._gl.enable(this._gl.BLEND),this._gl.blendFunc(this._gl.SRC_ALPHA,this._gl.ONE),!0):(console.error(this._gl.getProgramInfoLog(this._shadingProgram)),!1)):(console.log(this._gl.getShaderInfoLog(i)),!1)},t.prototype.update=function(t){var e=t-this._lastTime;this._lastTime=t;var i=this._resizeBuffers()?1:0;this._gl.useProgram(this._computeProgram),this._gl.uniform1ui(this._initLoc,i),this._gl.uniform1ui(this._particleCountLoc,this._particleCount),this._gl.uniform3fv(this._boundingBoxLoc,this._boundingBox.toArray()),this._gl.uniform1f(this._deltaTimeLoc,e),this._gl.uniform1f(this._gravityLoc,this._settingsObject.gravity),this._gl.uniform1ui(this._forceOnLoc,this._settingsObject.forceActive?1:0),this._gl.uniform3fv(this._forcePositionsloc,this._settingsObject.forcePosition.toArray()),this._gl.uniform1f(this._forceLoc,this._settingsObject.force),this._gl.dispatchCompute(this._dispatchGroups,1,1),this._gl.memoryBarrier(this._gl.VERTEX_ATTRIB_ARRAY_BARRIER_BIT),this._gl.useProgram(this._shadingProgram),this._gl.bindVertexArray(this._vao),this._gl.uniformMatrix4fv(this._projectionMatrixLoc,!1,this._threeCamera.projectionMatrix.toArray()),this._gl.uniformMatrix4fv(this._viewMatrixLoc,!1,this._threeCamera.matrixWorldInverse.toArray()),this._gl.uniform4fv(this._colorLoc,this._settingsObject.color.toArray()),this._gl.uniform1f(this._pointSizeLoc,this._settingsObject.particleSize),this._gl.drawArrays(this._gl.POINTS,0,this._particleCount),this._gl.bindVertexArray(null)},t.prototype._logComputeThings=function(){for(var t=[],e=[],i=0;i<3;i++)t.push(this._gl.getIndexedParameter(this._gl.MAX_COMPUTE_WORK_GROUP_COUNT,i)),e.push(this._gl.getIndexedParameter(this._gl.MAX_COMPUTE_WORK_GROUP_SIZE,i));console.log("max global (total) work group sizes "+t.join()),console.log("max local (in one shader) work group sizes "+e.join()),console.log("max local work group invocations: "+this._gl.getParameter(this._gl.MAX_COMPUTE_WORK_GROUP_INVOCATIONS))},t.prototype._resizeBuffers=function(){var t=Math.pow(this._settingsObject.particlesPerDimension,3);return t!==this._particleCount&&(this._particleCount=t,this._dispatchGroups=Math.trunc(this._particleCount/Math.pow(2,7))+1,this._gl.bindBuffer(this._gl.SHADER_STORAGE_BUFFER,this._posBuffer),this._gl.bufferData(this._gl.SHADER_STORAGE_BUFFER,new Float32Array(4*this._particleCount),this._gl.DYNAMIC_COPY),this._gl.bindBufferBase(this._gl.SHADER_STORAGE_BUFFER,0,this._posBuffer),this._gl.bindBuffer(this._gl.SHADER_STORAGE_BUFFER,this._velBuffer),this._gl.bufferData(this._gl.SHADER_STORAGE_BUFFER,new Float32Array(4*this._particleCount),this._gl.DYNAMIC_COPY),this._gl.bindBufferBase(this._gl.SHADER_STORAGE_BUFFER,1,this._velBuffer),!0)},t}();e.ParticleRenderer=a},function(t,e,i){"use strict";i.r(e),e.default="#version 310 es\n// particle compute shader\n\nlayout(local_size_x = 1024, local_size_y = 1, local_size_z = 1) in;\n\nlayout(std430, binding = 0) buffer Pos {\n  vec4 positions[];\n}\npos;\n\nlayout(std430, binding = 1) buffer Vel {\n  vec4 velocities[];\n}\nvel;\n\nuniform uint uiInit;\nuniform uint uiParticleCount;\nuniform vec3  v3BoundingBox;\nuniform float fDeltaTime;\nuniform float fGravity;\nuniform uint uiForce;\nuniform vec3  v3ForcePostion;\nuniform float fForce;\n\nvoid init(uint threadIndex) {\n  // calc the cubic root of particle count\n\n  float n = pow(float(uiParticleCount), (1.0 / 3.0));\n\n  uint  uiN          = uint(n);\n  float fthreadIndex = float(threadIndex);\n\n  float dx = v3BoundingBox.x / (n + 1.0);\n  float dy = v3BoundingBox.y / (n + 1.0);\n  float dz = v3BoundingBox.z / (n + 1.0);\n\n  uint modX = threadIndex % uiN;\n  uint modY = (threadIndex / uiN) % uiN;\n  uint modZ = (threadIndex / (uiN * uiN)) % uiN;\n\n  float px = float(modX) * dx + dx - (v3BoundingBox.x / 2.0);\n  float py = float(modY) * dy + dy - (v3BoundingBox.y / 2.0);\n  float pz = float(modZ) * dz + dz - (v3BoundingBox.z / 2.0);\n\n  // Semi-random velocities\n  float vx = cos(1234.0 * fthreadIndex);\n  float vy = sin(1234.0 * fthreadIndex);\n  float vz = cos(1234.0 * fthreadIndex);\n\n  // Save position and velocity\n  pos.positions[threadIndex].x = px;\n  pos.positions[threadIndex].y = py;\n  pos.positions[threadIndex].z = pz;\n\n  vel.velocities[threadIndex].x = vx;\n  vel.velocities[threadIndex].y = vy;\n  vel.velocities[threadIndex].z = vz;\n}\n\nvoid main() {\n  uint threadIndex = gl_GlobalInvocationID.x;\n\n  if (uiInit == 1u) {\n    init(threadIndex);\n    return;\n  }\n\n  vec3 position = pos.positions[threadIndex].xyz;\n  vec3 velocity = vel.velocities[threadIndex].xyz;\n\n  // Update Particle positions\n  position += velocity * fDeltaTime;\n\n  // Add in fGravity\n  velocity.y -= fGravity * fDeltaTime;\n\n  vec3 v3BB_half = v3BoundingBox / 2.0;\n\n  // Edge Collision Detection\n  if (position.x < -v3BB_half.x) {  // LEFT\n    position.x = -2.0 * v3BB_half.x - position.x;\n    velocity.x *= -0.9;\n  } else if (position.x > v3BB_half.x) {  // RIGHT\n    position.x = 2.0 * v3BB_half.x - position.x;\n    velocity.x *= -0.9;\n  }\n\n  if (position.y < -v3BB_half.y) {  // BOTTOM\n    position.y = -2.0 * v3BB_half.y - position.y;\n    velocity.y *= -0.45;  // if its on the bottom we extra dampen\n    velocity.x *= 0.9;\n  } else if (position.y > v3BB_half.y) {  // TOP\n    position.y = 2.0 * v3BB_half.y - position.y;\n    velocity.y *= -0.9;\n  }\n\n  if (position.z < -v3BB_half.z) {  // FRONT\n    position.z = -2.0 * v3BB_half.z - position.z;\n    velocity.z *= -0.9;\n  } else if (position.z > v3BB_half.z) {  // BACK\n    position.z = 2.0 * v3BB_half.z - position.z;\n    velocity.z *= -0.9;\n  }\n\n  // include force\n  if (uiForce != 0u) {\n    vec3  d    = v3ForcePostion - position;\n    float dist = sqrt(d.x * d.x + d.y * d.y + d.z * d.z);\n    if (dist < 1.0) {\n      dist = 1.0;  // This line prevents anything that is really close from\n                   // getting a huge force\n    }\n\n    velocity += d / dist * fForce / dist;\n  }\n\n  // update the arrays with our newly computed values\n  pos.positions[threadIndex].xyz  = position;\n  vel.velocities[threadIndex].xyz = velocity;\n}\n"},function(t,e,i){"use strict";i.r(e),e.default="#version 300 es\n// particle.frag\n\nprecision highp float;\n\nout vec4 FragColor;\n\nin vec4 color;\n\nvoid main(void) {\n  FragColor = color;\n}\n"},function(t,e,i){"use strict";i.r(e),e.default="#version 300 es\n// particle.vert\n\nlayout(location = 0) in vec4 a_position;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_viewMatrix;\nuniform vec4  u_color;\nuniform float u_pointSize;\n\nout vec4 color;\n\nvoid main(void) {\n  color = u_color;\n  // gl_Position = u_projectionMatrix * u_viewMatrix * vec4(a_position.x, 0.0, 0.0, 1.0);\n  gl_Position  = u_projectionMatrix * u_viewMatrix * vec4(a_position.xyz, 1.0);\n  gl_PointSize = u_pointSize;\n}\n"},function(t,e,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,i,n){void 0===n&&(n=i),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)"default"!==i&&Object.hasOwnProperty.call(t,i)&&n(e,t,i);return o(e,t),e},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.SettingsGui=void 0;var a=s(i(0)),l=r(i(5)),c=r(i(22)),h=function(){function t(){var t=this;this._settingsButton=l.default("#settingsButton"),this._settingsPanel=l.default("#settings"),this._particleCountSlider=this._settingsPanel.find("#particleCount"),this._particleCountText=this._settingsPanel.find("#particleCountText"),this._gravitySlider=this._settingsPanel.find("#gravity"),this._gravityText=this._settingsPanel.find("#gravityText"),this._particleSizeSlider=this._settingsPanel.find("#particleSize"),this._particleSizeText=this._settingsPanel.find("#particleSizeText"),this._forceSlider=this._settingsPanel.find("#force"),this._forceText=this._settingsPanel.find("#forceText"),this._perf=this._settingsPanel.find("#perf"),this._totalParticle=this._settingsPanel.find("#totalParticle"),this._colorPicker=new c.default({parent:this._settingsPanel.find("#colorPicker")[0],popup:!1,alpha:!0,editor:!1,color:"#ff0000",onChange:function(e){var i=e.rgba;t._settings&&t._settings.color.set(i[0]/255,i[1]/255,i[2]/255,i[3])}}),this._settingsButton.on("click",(function(){var e=t._settingsButton.find("[data-fa-i2svg]");t._settingsPanel.toggleClass("visible"),t._settingsButton.toggleClass("moved"),e.toggleClass("fa-bars"),e.toggleClass("fa-times-circle")})),this._settingsPanel.find("#btnSetDefault").on("click",(function(){t.setDefault()})),this._particleCountSlider.on("input change",(function(){t._settings.particlesPerDimension=t._particleCountSlider.val(),t.updateGUI()})),this._gravitySlider.on("input change",(function(){t._settings.gravity=t._gravitySlider.val(),t.updateGUI()})),this._particleSizeSlider.on("input change",(function(){t._settings.particleSize=t._particleSizeSlider.val(),t.updateGUI()})),this._forceSlider.on("input change",(function(){t._settings.force=t._forceSlider.val(),t.updateGUI()})),this._settingsPanel.find("input").on("keydown",(function(t){t.preventDefault()})),this.setDefault()}return t.prototype.getSettings=function(){return this._settings},t.prototype.updateFrames=function(t){this._perf.html(t.toFixed(2)+" ("+(1e3/t).toFixed(1)+" FPS)")},t.prototype.setDefault=function(){this._settings?(this._settings.color.set(1,0,0,1),this._settings.force=.1,this._settings.forceActive=!1,this._settings.forcePosition.set(0,0,0),this._settings.gravity=.98,this._settings.particleSize=1,this._settings.particlesPerDimension=50):this._settings={color:new a.Vector4(1,0,0,1),force:.1,forceActive:!1,forcePosition:new a.Vector3,gravity:.98,particleSize:1,particlesPerDimension:50},this.updateGUI()},t.prototype.updateGUI=function(){this._particleCountSlider.val(this._settings.particlesPerDimension),this._particleCountText.html(this._settings.particlesPerDimension.toString()),this._totalParticle.html(Math.pow(this._settings.particlesPerDimension,3).toLocaleString()),this._gravitySlider.val(this._settings.gravity),this._gravityText.html(this._settings.gravity.toString()),this._particleSizeSlider.val(this._settings.particleSize),this._particleSizeText.html(this._settings.particleSize.toString()),this._forceSlider.val(this._settings.force),this._forceText.html(this._settings.force.toString());var t=this._settings.color.toArray();t[0]*=255,t[1]*=255,t[2]*=255,this._colorPicker.setColor(t,!0)},t}();e.SettingsGui=h}]);